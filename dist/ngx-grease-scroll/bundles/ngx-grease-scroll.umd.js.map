{"version":3,"file":"ngx-grease-scroll.umd.js","sources":["../../../projects/ngx-grease-scroll/src/lib/services/grease-scroll.service.ts","../../../projects/ngx-grease-scroll/src/lib/directives/scroll/scroll.directive.ts","../../../projects/ngx-grease-scroll/src/lib/directives/scroll-to/scroll-to.directive.ts","../../../projects/ngx-grease-scroll/src/lib/grease-scroll.module.ts","../../../projects/ngx-grease-scroll/src/public-api.ts","../../../projects/ngx-grease-scroll/src/ngx-grease-scroll.ts"],"sourcesContent":["import {Injectable} from '@angular/core';\nimport {IGreaseScrollOptions} from \"../interfaces/IGreaseScrollOptions\";\nimport {EasingType} from \"../types/EasingType\";\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class GreaseScrollService\n{\n  readonly DEFAULT_OPTIONS: IGreaseScrollOptions = {\n    duration:       800,\n    offset:         0,\n    easing:         'easeInOutQuart',\n    callbackBefore: () => null,\n    callbackAfter:  () => null,\n    containerID:    '',\n    middleAlign:    false\n  };\n\n  protected _options: IGreaseScrollOptions;\n  protected _element: HTMLElement;\n  protected _intervalRef: number;\n  protected _timeLapsed: number = 0;\n  protected _position: number;\n  protected _startLocation: number;\n  protected _endLocation: number;\n  protected _distance: number;\n  protected _container: HTMLElement;\n  protected _lastFrameTime:number;\n\n\n  /**\n   * Smoothly scroll to given element using given options\n   * @param {HTMLElement} element The element which you want to scroll to it\n   * @param {Partial<IGreaseScrollOptions>} options The scrolling options\n   */\n  scrollTo(element: HTMLElement, options: Partial<IGreaseScrollOptions> = {})\n  {\n    /**\n     * Keep element reference\n     */\n    this._element = element;\n\n    /**\n     * Merge given default options and given options\n     */\n    this._options = {...this.DEFAULT_OPTIONS, ...options};\n\n    /**\n     * Get container element\n     */\n    this._container = this._options.containerID ? document.getElementById(this._options.containerID) : null;\n\n\n    // Initialize the whole thing\n    setTimeout(() => {\n\n      this._timeLapsed    = 0;\n      this._startLocation = this._getScrollLocation();\n      this._endLocation   = this._getEndLocation(element);\n      this._distance      = this._endLocation - this._startLocation;\n\n      this._options.callbackBefore(element);\n\n      this._lastFrameTime = Date.now();\n\n      requestAnimationFrame(() => this._animateScroll());\n    }, 0);\n\n  }\n\n  /**\n   * Retrieve current scroll location\n   */\n  protected _getScrollLocation(): number\n  {\n    if (this._container)\n    {\n      return this._container.scrollTop;\n    }\n    else\n    {\n      if (window.pageYOffset)\n      {\n        return window.pageYOffset;\n      }\n      else\n      {\n        return document.documentElement.scrollTop;\n      }\n    }\n  }\n\n  /**\n   * Calculate easing pattern.\n   */\n  protected _getEasingPattern(type: EasingType, time: number): number\n  {\n    switch (type)\n    {\n      case 'easeInQuad':\n        return time * time; // accelerating from zero velocity\n      case 'easeOutQuad':\n        return time * (2 - time); // decelerating to zero velocity\n      case 'easeInOutQuad':\n        return time < 0.5 ? 2 * time * time : -1 + (4 - 2 * time) * time; // acceleration until halfway, then deceleration\n      case 'easeInCubic':\n        return time * time * time; // accelerating from zero velocity\n      case 'easeOutCubic':\n        return (--time) * time * time + 1; // decelerating to zero velocity\n      case 'easeInOutCubic':\n        return time < 0.5 ? 4 * time * time * time : (time - 1) * (2 * time - 2) * (2 * time - 2) + 1; // acceleration until halfway, then deceleration\n      case 'easeInQuart':\n        return time * time * time * time; // accelerating from zero velocity\n      case 'easeOutQuart':\n        return 1 - (--time) * time * time * time; // decelerating to zero velocity\n      case 'easeInOutQuart':\n        return time < 0.5 ? 8 * time * time * time * time : 1 - 8 * (--time) * time * time * time; // acceleration until halfway, then deceleration\n      case 'easeInQuint':\n        return time * time * time * time * time; // accelerating from zero velocity\n      case 'easeOutQuint':\n        return 1 + (--time) * time * time * time * time; // decelerating to zero velocity\n      case 'easeInOutQuint':\n        return time < 0.5 ? 16 * time * time * time * time * time : 1 + 16 * (--time) * time * time * time * time; // acceleration until halfway, then deceleration\n      default:\n        return time;\n    }\n  };\n\n  /**\n   * Calculate how far to scroll\n   */\n  protected _getEndLocation(element: HTMLElement): number\n  {\n    let elementRect: DOMRect       = element.getBoundingClientRect(),\n        absoluteElementTop: number = elementRect.top + window.pageYOffset,\n        location: number;\n\n    if (this._options.middleAlign)\n    {\n      location = (absoluteElementTop + (element.offsetHeight / 2)) - (window.innerHeight / 2);\n    }\n    else\n    {\n      location = absoluteElementTop;\n    }\n\n    if (this._options.offset)\n    {\n      location = location - this._options.offset;\n    }\n\n    return Math.max(location, 0);\n  };\n\n  /**\n   * Scroll the page by an increment, and check if it's time to stop\n   */\n  protected _animateScroll()\n  {\n    const PREVIOUS_FRAME_DURATION:number = this._lastFrameTime - Date.now();\n\n    this._timeLapsed += PREVIOUS_FRAME_DURATION;\n\n    const PERCENTAGE: number = this._timeLapsed <= this._options.duration ? this._timeLapsed / this._options.duration : 1;\n\n    this._position = this._startLocation + (this._distance * this._getEasingPattern(this._options.easing, PERCENTAGE));\n\n    if (this._container)\n    {\n      this._container.scrollTop = this._position;\n    }\n    else\n    {\n      window.scrollTo(0, this._position);\n    }\n\n    let currentLocation = this._getScrollLocation(),\n        scrollHeight: number = this._container ? this._container.scrollHeight : document.body.scrollHeight,\n        internalHeight: number = this._container ? this._container.clientHeight + currentLocation : window.innerHeight + currentLocation;\n\n\n    if (this._position == this._endLocation || currentLocation == this._endLocation || internalHeight > scrollHeight)\n    {\n      this._options.callbackAfter(this._element);\n    }\n    else\n    {\n      this._lastFrameTime = Date.now();\n      requestAnimationFrame(() => this._animateScroll());\n    }\n  };\n\n}\n","import {Directive, ElementRef, HostListener, Input, OnInit} from '@angular/core';\nimport {IGreaseScrollOptions} from \"../../interfaces/IGreaseScrollOptions\";\nimport {GreaseScrollService} from \"../../services/grease-scroll.service\";\n\n@Directive({\n  selector: '[scroll]'\n})\nexport class ScrollDirective implements OnInit\n{\n  constructor(protected _elementRef: ElementRef,\n              protected _greaseScrollService: GreaseScrollService)\n  {\n  }\n\n  @Input('options') options: Partial<IGreaseScrollOptions> = {};\n  @Input('scrollIf') scrollIf: boolean;\n  @Input('scrollOnClick') scrollOnClick: boolean;\n\n  @HostListener('click', ['$event.target'])\n  onClick(target: EventTarget)\n  {\n    if (this.scrollOnClick)\n    {\n      this.scroll();\n    }\n  };\n\n  public ngOnInit()\n  {\n    this.scroll();\n  }\n\n  private scroll()\n  {\n    if (typeof this.scrollIf === 'undefined' || this.scrollIf === true)\n    {\n      setTimeout(() => {\n        this._greaseScrollService.scrollTo(this._elementRef.nativeElement, this.options);\n      }, 0);\n    }\n  }\n}\n","import {Directive, HostListener, Input} from '@angular/core';\nimport {IGreaseScrollOptions} from \"../../interfaces/IGreaseScrollOptions\";\nimport {GreaseScrollService} from \"../../services/grease-scroll.service\";\n\n@Directive({\n  selector: '[scrollTo]'\n})\nexport class ScrollToDirective\n{\n\n  constructor(protected _greaseScrollService: GreaseScrollService)\n  {\n  }\n\n  @Input('scrollTo') scrollTo: string;\n  @Input('options') options: Partial<IGreaseScrollOptions> = {};\n\n  @HostListener('click')\n  onClick()\n  {\n    const TARGET:HTMLElement = document.getElementById(this.scrollTo);\n\n    if (!TARGET)\n    {\n      return;\n    }\n\n    this._greaseScrollService.scrollTo(TARGET, this.options);\n  };\n}\n","import {NgModule} from '@angular/core';\nimport {ScrollToDirective} from './directives/scroll-to/scroll-to.directive';\nimport {ScrollDirective} from './directives/scroll/scroll.directive';\n\n@NgModule({\n  imports:      [],\n  declarations: [ScrollToDirective, ScrollDirective],\n  exports:      [ScrollToDirective, ScrollDirective]\n})\nexport class GreaseScrollModule\n{\n\n}\n","/*\n * Public API Surface of ngx-grease-scroll\n */\n\nexport * from './lib/directives/scroll/scroll.directive';\nexport * from './lib/directives/scroll-to/scroll-to.directive';\nexport * from './lib/interfaces/IGreaseScrollOptions';\nexport * from './lib/services/grease-scroll.service';\nexport * from './lib/types/EasingType';\nexport * from './lib/grease-scroll.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["Injectable","Directive","ElementRef","Input","HostListener","NgModule"],"mappings":"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"}