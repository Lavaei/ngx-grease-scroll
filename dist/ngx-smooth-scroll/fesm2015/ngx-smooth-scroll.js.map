{"version":3,"file":"ngx-smooth-scroll.js","sources":["../../../projects/ngx-smooth-scroll/src/lib/services/smooth-scroll.service.ts","../../../projects/ngx-smooth-scroll/src/lib/directives/scroll/scroll.directive.ts","../../../projects/ngx-smooth-scroll/src/lib/directives/scroll-to/scroll-to.directive.ts","../../../projects/ngx-smooth-scroll/src/lib/smooth-scroll.module.ts","../../../projects/ngx-smooth-scroll/src/public-api.ts","../../../projects/ngx-smooth-scroll/src/ngx-smooth-scroll.ts"],"sourcesContent":["import {Injectable} from '@angular/core';\nimport {ISmoothScrollOptions} from \"../interfaces/ISmoothScrollOptions\";\nimport {EasingType} from \"../types/EasingType\";\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class SmoothScrollService\n{\n  readonly DEFAULT_OPTIONS: ISmoothScrollOptions = {\n    duration:       800,\n    offset:         0,\n    easing:         'easeInOutQuart',\n    callbackBefore: () => null,\n    callbackAfter:  () => null,\n    containerID:    '',\n    middleAlign:    false\n  };\n\n  protected _options: ISmoothScrollOptions;\n  protected _element: HTMLElement;\n  protected _intervalRef: number;\n  protected _timeLapsed: number = 0;\n  protected _position: number;\n  protected _startLocation: number;\n  protected _endLocation: number;\n  protected _distance: number;\n  protected _container: HTMLElement;\n  protected _lastFrameTime:number;\n\n\n  /**\n   * Smoothly scroll to given element using given options\n   * @param {HTMLElement} element The element which you want to scroll to it\n   * @param {Partial<ISmoothScrollOptions>} options The scrolling options\n   */\n  scrollTo(element: HTMLElement, options: Partial<ISmoothScrollOptions> = {})\n  {\n    /**\n     * Keep element reference\n     */\n    this._element = element;\n\n    /**\n     * Merge given default options and given options\n     */\n    this._options = {...this.DEFAULT_OPTIONS, ...options};\n\n    /**\n     * Get container element\n     */\n    this._container = this._options.containerID ? document.getElementById(this._options.containerID) : null;\n\n\n    // Initialize the whole thing\n    setTimeout(() => {\n\n      this._timeLapsed    = 0;\n      this._startLocation = this._getScrollLocation();\n      this._endLocation   = this._getEndLocation(element);\n      this._distance      = this._endLocation - this._startLocation;\n\n      this._options.callbackBefore(element);\n\n      this._lastFrameTime = Date.now();\n\n      requestAnimationFrame(() => this._animateScroll());\n    }, 0);\n\n  }\n\n  /**\n   * Retrieve current scroll location\n   */\n  protected _getScrollLocation(): number\n  {\n    if (this._container)\n    {\n      return this._container.scrollTop;\n    }\n    else\n    {\n      if (window.pageYOffset)\n      {\n        return window.pageYOffset;\n      }\n      else\n      {\n        return document.documentElement.scrollTop;\n      }\n    }\n  }\n\n  /**\n   * Calculate easing pattern.\n   */\n  protected _getEasingPattern(type: EasingType, time: number): number\n  {\n    switch (type)\n    {\n      case 'easeInQuad':\n        return time * time; // accelerating from zero velocity\n      case 'easeOutQuad':\n        return time * (2 - time); // decelerating to zero velocity\n      case 'easeInOutQuad':\n        return time < 0.5 ? 2 * time * time : -1 + (4 - 2 * time) * time; // acceleration until halfway, then deceleration\n      case 'easeInCubic':\n        return time * time * time; // accelerating from zero velocity\n      case 'easeOutCubic':\n        return (--time) * time * time + 1; // decelerating to zero velocity\n      case 'easeInOutCubic':\n        return time < 0.5 ? 4 * time * time * time : (time - 1) * (2 * time - 2) * (2 * time - 2) + 1; // acceleration until halfway, then deceleration\n      case 'easeInQuart':\n        return time * time * time * time; // accelerating from zero velocity\n      case 'easeOutQuart':\n        return 1 - (--time) * time * time * time; // decelerating to zero velocity\n      case 'easeInOutQuart':\n        return time < 0.5 ? 8 * time * time * time * time : 1 - 8 * (--time) * time * time * time; // acceleration until halfway, then deceleration\n      case 'easeInQuint':\n        return time * time * time * time * time; // accelerating from zero velocity\n      case 'easeOutQuint':\n        return 1 + (--time) * time * time * time * time; // decelerating to zero velocity\n      case 'easeInOutQuint':\n        return time < 0.5 ? 16 * time * time * time * time * time : 1 + 16 * (--time) * time * time * time * time; // acceleration until halfway, then deceleration\n      default:\n        return time;\n    }\n  };\n\n  /**\n   * Calculate how far to scroll\n   */\n  protected _getEndLocation(element: HTMLElement): number\n  {\n    let elementRect: DOMRect       = element.getBoundingClientRect(),\n        absoluteElementTop: number = elementRect.top + window.pageYOffset,\n        location: number;\n\n    if (this._options.middleAlign)\n    {\n      location = (absoluteElementTop + (element.offsetHeight / 2)) - (window.innerHeight / 2);\n    }\n    else\n    {\n      location = absoluteElementTop;\n    }\n\n    if (this._options.offset)\n    {\n      location = location - this._options.offset;\n    }\n\n    return Math.max(location, 0);\n  };\n\n  /**\n   * Scroll the page by an increment, and check if it's time to stop\n   */\n  protected _animateScroll()\n  {\n    const PREVIOUS_FRAME_DURATION:number = this._lastFrameTime - Date.now();\n\n    this._timeLapsed += PREVIOUS_FRAME_DURATION;\n\n    const PERCENTAGE: number = this._timeLapsed <= this._options.duration ? this._timeLapsed / this._options.duration : 1;\n\n    this._position = this._startLocation + (this._distance * this._getEasingPattern(this._options.easing, PERCENTAGE));\n\n    if (this._container)\n    {\n      this._container.scrollTop = this._position;\n    }\n    else\n    {\n      window.scrollTo(0, this._position);\n    }\n\n    let currentLocation = this._getScrollLocation(),\n        scrollHeight: number = this._container ? this._container.scrollHeight : document.body.scrollHeight,\n        internalHeight: number = this._container ? this._container.clientHeight + currentLocation : window.innerHeight + currentLocation;\n\n\n    if (this._position == this._endLocation || currentLocation == this._endLocation || internalHeight > scrollHeight)\n    {\n      this._options.callbackAfter(this._element);\n    }\n    else\n    {\n      this._lastFrameTime = Date.now();\n      requestAnimationFrame(() => this._animateScroll());\n    }\n  };\n\n}\n","import {Directive, ElementRef, HostListener, Input, OnInit} from '@angular/core';\nimport {ISmoothScrollOptions} from \"../../interfaces/ISmoothScrollOptions\";\nimport {SmoothScrollService} from \"../../services/smooth-scroll.service\";\n\n@Directive({\n  selector: '[smoothScroll]'\n})\nexport class ScrollDirective implements OnInit\n{\n  constructor(protected _elementRef: ElementRef,\n              protected _smoothScrollService: SmoothScrollService)\n  {\n  }\n\n  @Input('options') options: Partial<ISmoothScrollOptions> = {};\n  @Input('scrollIf') scrollIf: boolean;\n  @Input('scrollOnClick') scrollOnClick: boolean;\n\n  @HostListener('click', ['$event.target'])\n  onClick(target: EventTarget)\n  {\n    if (this.scrollOnClick)\n    {\n      this.scroll();\n    }\n  };\n\n  public ngOnInit()\n  {\n    this.scroll();\n  }\n\n  private scroll()\n  {\n    if (typeof this.scrollIf === 'undefined' || this.scrollIf === true)\n    {\n      setTimeout(() => {\n        this._smoothScrollService.scrollTo(this._elementRef.nativeElement, this.options);\n      }, 0);\n    }\n  }\n}\n","import {Directive, HostListener, Input} from '@angular/core';\nimport {ISmoothScrollOptions} from \"../../interfaces/ISmoothScrollOptions\";\nimport {SmoothScrollService} from \"../../services/smooth-scroll.service\";\n\n@Directive({\n  selector: '[smoothScrollTo]'\n})\nexport class ScrollToDirective\n{\n\n  constructor(protected _smoothScrollService: SmoothScrollService)\n  {\n  }\n\n  @Input('scrollTo') scrollTo: string;\n  @Input('options') options: Partial<ISmoothScrollOptions> = {};\n\n  @HostListener('click')\n  onClick()\n  {\n    const TARGET:HTMLElement = document.getElementById(this.scrollTo);\n\n    if (!TARGET)\n    {\n      return;\n    }\n\n    this._smoothScrollService.scrollTo(TARGET, this.options);\n  };\n}\n","import {NgModule} from '@angular/core';\nimport {ScrollToDirective} from './directives/scroll-to/scroll-to.directive';\nimport {ScrollDirective} from './directives/scroll/scroll.directive';\n\n@NgModule({\n  imports:      [],\n  declarations: [ScrollToDirective, ScrollDirective],\n  exports:      [ScrollToDirective, ScrollDirective]\n})\nexport class SmoothScrollModule\n{\n\n}\n","/*\n * Public API Surface of ngx-smooth-scroll\n */\n\nexport * from './lib/directives/scroll/scroll.directive';\nexport * from './lib/directives/scroll-to/scroll-to.directive';\nexport * from './lib/interfaces/ISmoothScrollOptions';\nexport * from './lib/services/smooth-scroll.service';\nexport * from './lib/types/EasingType';\nexport * from './lib/smooth-scroll.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}